DEBUG:tortoise.db_client:INSERT INTO "article" ("article_url","created_at","media_id","news_data_id","raw_data_id") VALUES (?,?,?,?,?): ['http://test.com/article_partial', datetime.datetime(2026, 2, 3, 18, 6, 57, 237276, tzinfo=<UTC>), 1, None, None]
DEBUG:aiosqlite:executing functools.partial(<bound method Connection._execute_insert of <aiosqlite.core.Connection object at 0x7f2c1e30ecf0>>, 'INSERT INTO "article" ("article_url","created_at","media_id","news_data_id","raw_data_id") VALUES (?,?,?,?,?)', ['http://test.com/article_partial', datetime.datetime(2026, 2, 3, 18, 6, 57, 237276, tzinfo=<UTC>), 1, None, None])
DEBUG:aiosqlite:operation functools.partial(<bound method Connection._execute_insert of <aiosqlite.core.Connection object at 0x7f2c1e30ecf0>>, 'INSERT INTO "article" ("article_url","created_at","media_id","news_data_id","raw_data_id") VALUES (?,?,?,?,?)', ['http://test.com/article_partial', datetime.datetime(2026, 2, 3, 18, 6, 57, 237276, tzinfo=<UTC>), 1, None, None]) completed
DEBUG:tortoise.db_client:INSERT INTO "article" ("article_url","created_at","media_id","news_data_id","raw_data_id") VALUES (?,?,?,?,?): ['http://test.com/article_partial_2', datetime.datetime(2026, 2, 3, 18, 6, 57, 237851, tzinfo=<UTC>), 1, 1, None]
DEBUG:aiosqlite:executing functools.partial(<bound method Connection._execute_insert of <aiosqlite.core.Connection object at 0x7f2c1e30ecf0>>, 'INSERT INTO "article" ("article_url","created_at","media_id","news_data_id","raw_data_id") VALUES (?,?,?,?,?)', ['http://test.com/article_partial_2', datetime.datetime(2026, 2, 3, 18, 6, 57, 237851, tzinfo=<UTC>), 1, 1, None])
DEBUG:aiosqlite:returning exception FOREIGN KEY constraint failed
DEBUG:tortoise.db_client:INSERT INTO "article" ("article_url","created_at","media_id","news_data_id","raw_data_id") VALUES (?,?,?,?,?): ['http://test.com/article', datetime.datetime(2026, 2, 3, 18, 6, 57, 238218, tzinfo=<UTC>), 1, 1, 1]
DEBUG:aiosqlite:executing functools.partial(<bound method Connection._execute_insert of <aiosqlite.core.Connection object at 0x7f2c1e30ecf0>>, 'INSERT INTO "article" ("article_url","created_at","media_id","news_data_id","raw_data_id") VALUES (?,?,?,?,?)', ['http://test.com/article', datetime.datetime(2026, 2, 3, 18, 6, 57, 238218, tzinfo=<UTC>), 1, 1, 1])
DEBUG:aiosqlite:returning exception FOREIGN KEY constraint failed
Registered apps: {'models': {'Article': <class 'backend.database.models.article.Article'>, 'Media': <class 'backend.database.models.media.Media'>, 'NewsData': <class 'backend.database.models.news_data.NewsData'>, 'RawNewsData': <class 'backend.database.models.raw_news_data.RawNewsData'>}}
Registered models in 'models' app: dict_keys(['Article', 'Media', 'NewsData', 'RawNewsData'])
Tables in DB: (5, [<sqlite3.Row object at 0x7f2c1e1b72b0>, <sqlite3.Row object at 0x7f2c1e1b72e0>, <sqlite3.Row object at 0x7f2c1e1b7310>, <sqlite3.Row object at 0x7f2c1e1b7340>, <sqlite3.Row object at 0x7f2c1e1b73a0>])
Creating Media...
Creating RawNewsData...
Creating NewsData...
Media ID: 1
RawNewsData ID: 1
NewsData ID: 1
Creating Article with only Media...
Success: Article with only Media created.
Creating Article with Media and NewsData...
Failure: Article with Media and NewsData failed: FOREIGN KEY constraint failed
Creating full Article...
Traceback (most recent call last):
  File "/home/vvalntnv/development/news-agent/backend/.venv/lib/python3.13/site-packages/tortoise/backends/sqlite/client.py", line 43, in translate_exceptions_
    return await func(self, query, *args)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vvalntnv/development/news-agent/backend/.venv/lib/python3.13/site-packages/tortoise/backends/sqlite/client.py", line 129, in execute_insert
    return (await connection.execute_insert(query, values))[0]
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vvalntnv/development/news-agent/backend/.venv/lib/python3.13/site-packages/aiosqlite/core.py", line 233, in execute_insert
    return await self._execute(self._execute_insert, sql, parameters)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vvalntnv/development/news-agent/backend/.venv/lib/python3.13/site-packages/aiosqlite/core.py", line 160, in _execute
    return await future
           ^^^^^^^^^^^^
  File "/home/vvalntnv/development/news-agent/backend/.venv/lib/python3.13/site-packages/aiosqlite/core.py", line 63, in _connection_worker_thread
    result = function()
  File "/home/vvalntnv/development/news-agent/backend/.venv/lib/python3.13/site-packages/aiosqlite/core.py", line 142, in _execute_insert
    cursor = self._conn.execute(sql, parameters)
sqlite3.IntegrityError: FOREIGN KEY constraint failed

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/vvalntnv/development/news-agent/verify_new_models.py", line 98, in <module>
    asyncio.run(verify())
    ~~~~~~~~~~~^^^^^^^^^^
  File "/home/vvalntnv/.local/share/uv/python/cpython-3.13.11-linux-x86_64-gnu/lib/python3.13/asyncio/runners.py", line 195, in run
    return runner.run(main)
           ~~~~~~~~~~^^^^^^
  File "/home/vvalntnv/.local/share/uv/python/cpython-3.13.11-linux-x86_64-gnu/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/home/vvalntnv/.local/share/uv/python/cpython-3.13.11-linux-x86_64-gnu/lib/python3.13/asyncio/base_events.py", line 725, in run_until_complete
    return future.result()
           ~~~~~~~~~~~~~^^
  File "/home/vvalntnv/development/news-agent/verify_new_models.py", line 68, in verify
    article = await Article.create(
              ^^^^^^^^^^^^^^^^^^^^^
    ...<4 lines>...
    )
    ^
  File "/home/vvalntnv/development/news-agent/backend/.venv/lib/python3.13/site-packages/tortoise/models.py", line 1212, in create
    await instance.save(using_db=db, force_create=True)
  File "/home/vvalntnv/development/news-agent/backend/.venv/lib/python3.13/site-packages/tortoise/models.py", line 998, in save
    await executor.execute_insert(self)
  File "/home/vvalntnv/development/news-agent/backend/.venv/lib/python3.13/site-packages/tortoise/backends/base/executor.py", line 188, in execute_insert
    insert_result = await self.db.execute_insert(self.insert_query, values)
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/vvalntnv/development/news-agent/backend/.venv/lib/python3.13/site-packages/tortoise/backends/sqlite/client.py", line 47, in translate_exceptions_
    raise IntegrityError(exc)
tortoise.exceptions.IntegrityError: FOREIGN KEY constraint failed
